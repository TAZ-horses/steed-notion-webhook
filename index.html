<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Steed Media Mindmap</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body { margin: 0; background: #f4f4f4; }
    #mindmap { width: 100vw; height: 100vh; }
    .node circle { fill: #2a423f; stroke: #fff; }
    .node text { font-size: 12px; fill: white; }
    .link { stroke: #ccc; stroke-opacity: 0.6; }
  </style>
</head>
<body>
  <svg id="mindmap"></svg>
  <script>
    fetch("mindmap_data.json")
      .then(res => res.json())
      .then(data => {
        const width = window.innerWidth;
        const height = window.innerHeight;
        const svg = d3.select("#mindmap")
          .attr("width", width)
          .attr("height", height)
          .append("g")
          .attr("transform", `translate(${width/2},${height/2})`);

        // Build the mindmap
        const root = { name: "Steed Media", children: Object.entries(data).map(([k,v]) => 
          ({ name: k, children: v })) };
        
        const radius = Math.min(width, height) / 2 - 40;
        const rootNode = d3.hierarchy(root);
        d3.tree().size([2 * Math.PI, radius])(rootNode);

        // Draw links/nodes
        svg.selectAll(".link")
          .data(rootNode.links())
          .enter().append("path")
          .attr("class", "link")
          .attr("d", d3.linkRadial().angle(d => d.x).radius(d => d.y));

        const node = svg.selectAll(".node")
          .data(rootNode.descendants())
          .enter().append("g")
          .attr("class", "node")
          .attr("transform", d => `rotate(${d.x * 180/Math.PI - 90}) translate(${d.y},0)`);

        node.append("circle").attr("r", 4.5);
        node.append("text")
          .attr("dy", "0.31em")
          .attr("x", d => d.x < Math.PI === !d.children ? 6 : -6)
          .text(d => d.data.name);
      })
      .catch(err => console.error("Error loading data:", err));
  </script>
</body>
</html>
